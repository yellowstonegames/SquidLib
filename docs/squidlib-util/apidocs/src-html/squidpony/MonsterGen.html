<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc -->
<title>Source code</title>
<meta name="description" content="source: package: squidpony, class: MonsterGen">
<meta name="generator" content="javadoc/SourceToHTMLConverter">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body class="source">
<main role="main">
<div class="sourceContainer">
<pre><span class="sourceLineNo">001</span><a id="line.1">package squidpony;</a>
<span class="sourceLineNo">002</span><a id="line.2"></a>
<span class="sourceLineNo">003</span><a id="line.3">import squidpony.squidmath.*;</a>
<span class="sourceLineNo">004</span><a id="line.4"></a>
<span class="sourceLineNo">005</span><a id="line.5">import java.util.*;</a>
<span class="sourceLineNo">006</span><a id="line.6"></a>
<span class="sourceLineNo">007</span><a id="line.7">/**</a>
<span class="sourceLineNo">008</span><a id="line.8"> * A class for generating random monster descriptions; can be subclassed to generate stats for a specific game. Use the</a>
<span class="sourceLineNo">009</span><a id="line.9"> * nested Chimera class for most of the functionality here; MonsterGen is here so you can change the descriptors that</a>
<span class="sourceLineNo">010</span><a id="line.10"> * monsters can be given (they are in public array fields). You can call randomizeAppearance or randomizePowers on a</a>
<span class="sourceLineNo">011</span><a id="line.11"> * Chimera to draw from the list of descriptors in MonsterGen, or fuse two Chimera objects with the mix method in the</a>
<span class="sourceLineNo">012</span><a id="line.12"> * Chimera class. Chimeras can be printed to a usable format with presentVisible or present; the former does not print</a>
<span class="sourceLineNo">013</span><a id="line.13"> * special powers and is suitable for monsters being encountered, and the latter is more useful for texts in the game</a>
<span class="sourceLineNo">014</span><a id="line.14"> * world that describe some monster.</a>
<span class="sourceLineNo">015</span><a id="line.15"> * Created by Tommy Ettinger on 1/31/2016.</a>
<span class="sourceLineNo">016</span><a id="line.16"> */</a>
<span class="sourceLineNo">017</span><a id="line.17">public class MonsterGen {</a>
<span class="sourceLineNo">018</span><a id="line.18"></a>
<span class="sourceLineNo">019</span><a id="line.19">    public static StatefulRNG srng = new StatefulRNG();</a>
<span class="sourceLineNo">020</span><a id="line.20"></a>
<span class="sourceLineNo">021</span><a id="line.21">    public String[] components = new String[]{"head", "tail", "legs", "claws", "fangs", "eyes", "hooves", "beak",</a>
<span class="sourceLineNo">022</span><a id="line.22">            "wings", "pseudopods", "snout", "carapace", "sting", "pincers", "fins", "shell"},</a>
<span class="sourceLineNo">023</span><a id="line.23">            adjectives = new String[]{"hairy", "scaly", "feathered", "chitinous", "pulpy", "writhing", "horrid",</a>
<span class="sourceLineNo">024</span><a id="line.24">            "fuzzy", "reptilian", "avian", "insectoid", "tentacled", "thorny", "angular", "curvaceous", "lean",</a>
<span class="sourceLineNo">025</span><a id="line.25">            "metallic", "stony", "glassy", "gaunt", "obese", "ill-proportioned", "sickly", "asymmetrical", "muscular"},</a>
<span class="sourceLineNo">026</span><a id="line.26">    powerAdjectives = new String[]{"fire-breathing", "electrified", "frigid", "toxic", "noxious", "nimble",</a>
<span class="sourceLineNo">027</span><a id="line.27">            "brutish", "bloodthirsty", "furious", "reflective", "regenerating", "earth-shaking", "thunderous",</a>
<span class="sourceLineNo">028</span><a id="line.28">            "screeching", "all-seeing", "semi-corporeal", "vampiric", "skulking", "terrifying", "undead", "mechanical",</a>
<span class="sourceLineNo">029</span><a id="line.29">            "angelic", "plant-like", "fungal", "contagious", "graceful", "malevolent", "gigantic", "wailing"},</a>
<span class="sourceLineNo">030</span><a id="line.30">    powerPhrases = new String[]{"can evoke foul magic", "can petrify with its gaze", "hurts your eyes to look at",</a>
<span class="sourceLineNo">031</span><a id="line.31">            "can spit venom", "can cast arcane spells", "can call on divine power", "embodies the wilderness",</a>
<span class="sourceLineNo">032</span><a id="line.32">            "hates all other species", "constantly drools acid", "whispers maddening secrets in forgotten tongues",</a>
<span class="sourceLineNo">033</span><a id="line.33">            "shudders between impossible dimensions", "withers any life around it", "revels in pain"};</a>
<span class="sourceLineNo">034</span><a id="line.34"></a>
<span class="sourceLineNo">035</span><a id="line.35">    /**</a>
<span class="sourceLineNo">036</span><a id="line.36">     * A creature that can be mixed with other Chimeras or given additional descriptors, then printed in a usable format</a>
<span class="sourceLineNo">037</span><a id="line.37">     * for game text.</a>
<span class="sourceLineNo">038</span><a id="line.38">     */</a>
<span class="sourceLineNo">039</span><a id="line.39">    public static class Chimera</a>
<span class="sourceLineNo">040</span><a id="line.40">    {</a>
<span class="sourceLineNo">041</span><a id="line.41">        public OrderedMap&lt;String, List&lt;String&gt;&gt; parts;</a>
<span class="sourceLineNo">042</span><a id="line.42">        public OrderedSet&lt;String&gt; unsaidAdjectives, wholeAdjectives, powerAdjectives, powerPhrases;</a>
<span class="sourceLineNo">043</span><a id="line.43">        public String name, mainForm, unknown;</a>
<span class="sourceLineNo">044</span><a id="line.44"></a>
<span class="sourceLineNo">045</span><a id="line.45">        /**</a>
<span class="sourceLineNo">046</span><a id="line.46">         * Copies an existing Chimera other into a new Chimera with potentially a different name.</a>
<span class="sourceLineNo">047</span><a id="line.47">         * @param name the name to use for the Chimera this constructs</a>
<span class="sourceLineNo">048</span><a id="line.48">         * @param other the existing Chimera to copy all fields but name from.</a>
<span class="sourceLineNo">049</span><a id="line.49">         */</a>
<span class="sourceLineNo">050</span><a id="line.50">        public Chimera(String name, Chimera other)</a>
<span class="sourceLineNo">051</span><a id="line.51">        {</a>
<span class="sourceLineNo">052</span><a id="line.52">            this.name = name;</a>
<span class="sourceLineNo">053</span><a id="line.53">            unknown = other.unknown;</a>
<span class="sourceLineNo">054</span><a id="line.54">            if(unknown != null)</a>
<span class="sourceLineNo">055</span><a id="line.55">                mainForm = unknown;</a>
<span class="sourceLineNo">056</span><a id="line.56">            else</a>
<span class="sourceLineNo">057</span><a id="line.57">                mainForm = other.name;</a>
<span class="sourceLineNo">058</span><a id="line.58">            parts = new OrderedMap&lt;&gt;(other.parts);</a>
<span class="sourceLineNo">059</span><a id="line.59">            List&lt;String&gt; oldParts = new ArrayList&lt;&gt;(parts.remove(mainForm));</a>
<span class="sourceLineNo">060</span><a id="line.60">            parts.put(name, oldParts);</a>
<span class="sourceLineNo">061</span><a id="line.61">            unsaidAdjectives = new OrderedSet&lt;&gt;(other.unsaidAdjectives);</a>
<span class="sourceLineNo">062</span><a id="line.62">            wholeAdjectives = new OrderedSet&lt;&gt;(other.wholeAdjectives);</a>
<span class="sourceLineNo">063</span><a id="line.63">            powerAdjectives = new OrderedSet&lt;&gt;(other.powerAdjectives);</a>
<span class="sourceLineNo">064</span><a id="line.64">            powerPhrases = new OrderedSet&lt;&gt;(other.powerPhrases);</a>
<span class="sourceLineNo">065</span><a id="line.65">        }</a>
<span class="sourceLineNo">066</span><a id="line.66"></a>
<span class="sourceLineNo">067</span><a id="line.67">        /**</a>
<span class="sourceLineNo">068</span><a id="line.68">         * Constructs a Chimera given a name (typically all lower-case), null if the creature is familiar or a String if</a>
<span class="sourceLineNo">069</span><a id="line.69">         * the creature's basic shape is likely to be unknown to players, and an array or vararg of String terms</a>
<span class="sourceLineNo">070</span><a id="line.70">         * containing, usually, several groups of String elements separated by the literal string ";" . The first group</a>
<span class="sourceLineNo">071</span><a id="line.71">         * in terms contains what body parts this creature has and could potentially grant to another creature if mixed;</a>
<span class="sourceLineNo">072</span><a id="line.72">         * examples are "head", "legs", "claws", "wings", and "eyes". In the next group are the "unsaid" adjectives,</a>
<span class="sourceLineNo">073</span><a id="line.73">         * which are not listed if unknown is false, but may be contributed to other creatures if mixed (mixing a horse</a>
<span class="sourceLineNo">074</span><a id="line.74">         * with a snake may make the horse scaly, since "scaly" is an unsaid adjective for snakes). Next are adjectives</a>
<span class="sourceLineNo">075</span><a id="line.75">         * that apply to the whole creature's appearance, which don't need to replicate the unsaid adjectives and are</a>
<span class="sourceLineNo">076</span><a id="line.76">         * often added as a step to randomize a creature; this part is often empty and simply ends on the separator ";"</a>
<span class="sourceLineNo">077</span><a id="line.77">         * . Next are the power adjectives, which are any special abilities a creature might have that aren't</a>
<span class="sourceLineNo">078</span><a id="line.78">         * immediately visible, like "furious" or "toxic". Last are the power phrases, which follow a format like "can</a>
<span class="sourceLineNo">079</span><a id="line.79">         * cast arcane spells", "embodies the wilderness", or "constantly drools acid"; it should be able to be put in a</a>
<span class="sourceLineNo">080</span><a id="line.80">         * sentence after the word "that", like "a snake that can cast arcane spells".</a>
<span class="sourceLineNo">081</span><a id="line.81">         * &lt;br&gt;</a>
<span class="sourceLineNo">082</span><a id="line.82">         * The unknown argument determines if descriptions need to include basic properties like calling a Snake scaly</a>
<span class="sourceLineNo">083</span><a id="line.83">         * (null in this case) or a Pestilence Fiend chitinous (no one knows what that creature is, so a String needs to</a>
<span class="sourceLineNo">084</span><a id="line.84">         * be given so a player and player character that don't know its name can call it something, like "demon").</a>
<span class="sourceLineNo">085</span><a id="line.85">         * &lt;br&gt;</a>
<span class="sourceLineNo">086</span><a id="line.86">         * An example is {@code Chimera SNAKE = new Chimera("snake", null, "head", "tail", "fangs", "eyes", ";",</a>
<span class="sourceLineNo">087</span><a id="line.87">         * "reptilian", "scaly", "lean", "curvaceous", ";", ";", "toxic");}</a>
<span class="sourceLineNo">088</span><a id="line.88">         * @param name the name to refer to the creature by and its body parts by when mixed</a>
<span class="sourceLineNo">089</span><a id="line.89">         * @param unknown true if the creature's basic shape is unlikely to be known by a player, false for animals and</a>
<span class="sourceLineNo">090</span><a id="line.90">         *                possibly common mythological creatures like dragons</a>
<span class="sourceLineNo">091</span><a id="line.91">         * @param terms an array or vararg of String elements, separated by ";" , see method documentation for details</a>
<span class="sourceLineNo">092</span><a id="line.92">         */</a>
<span class="sourceLineNo">093</span><a id="line.93">        public Chimera(String name, String unknown, String... terms)</a>
<span class="sourceLineNo">094</span><a id="line.94">        {</a>
<span class="sourceLineNo">095</span><a id="line.95">            this.name = name;</a>
<span class="sourceLineNo">096</span><a id="line.96">            this.unknown = unknown;</a>
<span class="sourceLineNo">097</span><a id="line.97">            if(unknown != null)</a>
<span class="sourceLineNo">098</span><a id="line.98">                mainForm = unknown;</a>
<span class="sourceLineNo">099</span><a id="line.99">            else</a>
<span class="sourceLineNo">100</span><a id="line.100">                mainForm = name;</a>
<span class="sourceLineNo">101</span><a id="line.101">            parts = new OrderedMap&lt;&gt;();</a>
<span class="sourceLineNo">102</span><a id="line.102">            unsaidAdjectives = new OrderedSet&lt;&gt;();</a>
<span class="sourceLineNo">103</span><a id="line.103">            wholeAdjectives = new OrderedSet&lt;&gt;();</a>
<span class="sourceLineNo">104</span><a id="line.104">            powerAdjectives = new OrderedSet&lt;&gt;();</a>
<span class="sourceLineNo">105</span><a id="line.105">            powerPhrases = new OrderedSet&lt;&gt;();</a>
<span class="sourceLineNo">106</span><a id="line.106">            ArrayList&lt;String&gt; selfParts = new ArrayList&lt;&gt;();</a>
<span class="sourceLineNo">107</span><a id="line.107">            int t = 0;</a>
<span class="sourceLineNo">108</span><a id="line.108">            for (; t &lt; terms.length; t++) {</a>
<span class="sourceLineNo">109</span><a id="line.109">                if(";".equals(terms[t]))</a>
<span class="sourceLineNo">110</span><a id="line.110">                {</a>
<span class="sourceLineNo">111</span><a id="line.111">                    t++;</a>
<span class="sourceLineNo">112</span><a id="line.112">                    break;</a>
<span class="sourceLineNo">113</span><a id="line.113">                }</a>
<span class="sourceLineNo">114</span><a id="line.114">                selfParts.add(terms[t]);</a>
<span class="sourceLineNo">115</span><a id="line.115">            }</a>
<span class="sourceLineNo">116</span><a id="line.116">            parts.put(name, selfParts);</a>
<span class="sourceLineNo">117</span><a id="line.117">            for (; t &lt; terms.length; t++) {</a>
<span class="sourceLineNo">118</span><a id="line.118">                if (";".equals(terms[t])) {</a>
<span class="sourceLineNo">119</span><a id="line.119">                    t++;</a>
<span class="sourceLineNo">120</span><a id="line.120">                    break;</a>
<span class="sourceLineNo">121</span><a id="line.121">                }</a>
<span class="sourceLineNo">122</span><a id="line.122">                unsaidAdjectives.add(terms[t]);</a>
<span class="sourceLineNo">123</span><a id="line.123">            }</a>
<span class="sourceLineNo">124</span><a id="line.124">            for (; t &lt; terms.length; t++) {</a>
<span class="sourceLineNo">125</span><a id="line.125">                if (";".equals(terms[t])) {</a>
<span class="sourceLineNo">126</span><a id="line.126">                    t++;</a>
<span class="sourceLineNo">127</span><a id="line.127">                    break;</a>
<span class="sourceLineNo">128</span><a id="line.128">                }</a>
<span class="sourceLineNo">129</span><a id="line.129">                wholeAdjectives.add(terms[t]);</a>
<span class="sourceLineNo">130</span><a id="line.130">            }</a>
<span class="sourceLineNo">131</span><a id="line.131">            wholeAdjectives.removeAll(unsaidAdjectives);</a>
<span class="sourceLineNo">132</span><a id="line.132">            for (; t &lt; terms.length; t++) {</a>
<span class="sourceLineNo">133</span><a id="line.133">                if (";".equals(terms[t])) {</a>
<span class="sourceLineNo">134</span><a id="line.134">                    t++;</a>
<span class="sourceLineNo">135</span><a id="line.135">                    break;</a>
<span class="sourceLineNo">136</span><a id="line.136">                }</a>
<span class="sourceLineNo">137</span><a id="line.137">                powerAdjectives.add(terms[t]);</a>
<span class="sourceLineNo">138</span><a id="line.138">            }</a>
<span class="sourceLineNo">139</span><a id="line.139">            for (; t &lt; terms.length; t++) {</a>
<span class="sourceLineNo">140</span><a id="line.140">                if (";".equals(terms[t])) {</a>
<span class="sourceLineNo">141</span><a id="line.141">                    break;</a>
<span class="sourceLineNo">142</span><a id="line.142">                }</a>
<span class="sourceLineNo">143</span><a id="line.143">                powerPhrases.add(terms[t]);</a>
<span class="sourceLineNo">144</span><a id="line.144">            }</a>
<span class="sourceLineNo">145</span><a id="line.145">        }</a>
<span class="sourceLineNo">146</span><a id="line.146">        /**</a>
<span class="sourceLineNo">147</span><a id="line.147">         * Constructs a Chimera given a name (typically all lower-case), null if the creature is familiar or a String if</a>
<span class="sourceLineNo">148</span><a id="line.148">         * the creature's basic shape is likely to be unknown to players, and several String Collection args for the</a>
<span class="sourceLineNo">149</span><a id="line.149">         * different aspects of the Chimera. The first Collection contains what body parts this creature has and could</a>
<span class="sourceLineNo">150</span><a id="line.150">         * potentially grant to another creature if mixed; examples are "head", "legs", "claws", "wings", and "eyes".</a>
<span class="sourceLineNo">151</span><a id="line.151">         * The next Collection contains "unsaid" adjectives, which are not listed if unknown is false, but may be</a>
<span class="sourceLineNo">152</span><a id="line.152">         * contributed to other creatures if mixed (mixing a horse with a snake may make the horse scaly, since "scaly"</a>
<span class="sourceLineNo">153</span><a id="line.153">         * is an unsaid adjective for snakes). Next are adjectives that apply to the "whole" creature's appearance,</a>
<span class="sourceLineNo">154</span><a id="line.154">         * which don't need to replicate the unsaid adjectives and are often added as a step to randomize a creature;</a>
<span class="sourceLineNo">155</span><a id="line.155">         * this Collection is often empty. Next are the power adjectives, which are any special abilities a creature</a>
<span class="sourceLineNo">156</span><a id="line.156">         * might have that aren't immediately visible, like "furious" or "toxic". Last are the power phrases, which</a>
<span class="sourceLineNo">157</span><a id="line.157">         * follow a format like "can cast arcane spells", "embodies the wilderness", or "constantly drools acid"; it</a>
<span class="sourceLineNo">158</span><a id="line.158">         * should be able to be put in a sentence after the word "that", like "a snake that can cast arcane spells".</a>
<span class="sourceLineNo">159</span><a id="line.159">         * &lt;br&gt;</a>
<span class="sourceLineNo">160</span><a id="line.160">         * The unknown argument determines if descriptions need to include basic properties like calling a Snake scaly</a>
<span class="sourceLineNo">161</span><a id="line.161">         * (null in this case) or a Pestilence Fiend chitinous (no one knows what that creature is, so a String needs to</a>
<span class="sourceLineNo">162</span><a id="line.162">         * be given so a player and player character that don't know its name can call it something, like "demon").</a>
<span class="sourceLineNo">163</span><a id="line.163">         * &lt;br&gt;</a>
<span class="sourceLineNo">164</span><a id="line.164">         * An example is {@code Chimera SNAKE = new Chimera("snake", null, "head", "tail", "fangs", "eyes", ";",</a>
<span class="sourceLineNo">165</span><a id="line.165">         * "reptilian", "scaly", "lean", "curvaceous", ";", ";", "toxic");}</a>
<span class="sourceLineNo">166</span><a id="line.166">         * @param name the name to refer to the creature by and its body parts by when mixed</a>
<span class="sourceLineNo">167</span><a id="line.167">         * @param unknown true if the creature's basic shape is unlikely to be known by a player, false for animals and</a>
<span class="sourceLineNo">168</span><a id="line.168">         *                possibly common mythological creatures like dragons</a>
<span class="sourceLineNo">169</span><a id="line.169">         * @param parts the different body part nouns this creature can contribute to a creature when mixed</a>
<span class="sourceLineNo">170</span><a id="line.170">         * @param unsaid appearance adjectives that don't need to be said if the creature is familiar</a>
<span class="sourceLineNo">171</span><a id="line.171">         * @param whole appearance adjectives that apply to the whole creature</a>
<span class="sourceLineNo">172</span><a id="line.172">         * @param powerAdj power adjectives like "furious" or "fire-breathing"</a>
<span class="sourceLineNo">173</span><a id="line.173">         * @param powerPhr power phrases like "can cast arcane spells"</a>
<span class="sourceLineNo">174</span><a id="line.174">         */</a>
<span class="sourceLineNo">175</span><a id="line.175">        public Chimera(String name, String unknown, Collection&lt;String&gt; parts, Collection&lt;String&gt; unsaid,</a>
<span class="sourceLineNo">176</span><a id="line.176">                       Collection&lt;String&gt; whole, Collection&lt;String&gt; powerAdj, Collection&lt;String&gt; powerPhr)</a>
<span class="sourceLineNo">177</span><a id="line.177">        {</a>
<span class="sourceLineNo">178</span><a id="line.178">            this.name = name;</a>
<span class="sourceLineNo">179</span><a id="line.179">            this.unknown = unknown;</a>
<span class="sourceLineNo">180</span><a id="line.180">            if(unknown != null)</a>
<span class="sourceLineNo">181</span><a id="line.181">                mainForm = unknown;</a>
<span class="sourceLineNo">182</span><a id="line.182">            else</a>
<span class="sourceLineNo">183</span><a id="line.183">                mainForm = name;</a>
<span class="sourceLineNo">184</span><a id="line.184">            this.parts = new OrderedMap&lt;String, List&lt;String&gt;&gt;();</a>
<span class="sourceLineNo">185</span><a id="line.185">            unsaidAdjectives = new OrderedSet&lt;String&gt;(unsaid);</a>
<span class="sourceLineNo">186</span><a id="line.186">            wholeAdjectives = new OrderedSet&lt;String&gt;(whole);</a>
<span class="sourceLineNo">187</span><a id="line.187">            powerAdjectives = new OrderedSet&lt;String&gt;(powerAdj);</a>
<span class="sourceLineNo">188</span><a id="line.188">            powerPhrases = new OrderedSet&lt;String&gt;(powerPhr);</a>
<span class="sourceLineNo">189</span><a id="line.189">            ArrayList&lt;String&gt; selfParts = new ArrayList&lt;String&gt;(parts);</a>
<span class="sourceLineNo">190</span><a id="line.190">            this.parts.put(name, selfParts);</a>
<span class="sourceLineNo">191</span><a id="line.191">        }</a>
<span class="sourceLineNo">192</span><a id="line.192"></a>
<span class="sourceLineNo">193</span><a id="line.193">        /**</a>
<span class="sourceLineNo">194</span><a id="line.194">         * Get a string description of this monster's appearance and powers.</a>
<span class="sourceLineNo">195</span><a id="line.195">         * @param capitalize true if the description should start with a capital letter.</a>
<span class="sourceLineNo">196</span><a id="line.196">         * @return a String description including both appearance and powers</a>
<span class="sourceLineNo">197</span><a id="line.197">         */</a>
<span class="sourceLineNo">198</span><a id="line.198">        public String present(boolean capitalize)</a>
<span class="sourceLineNo">199</span><a id="line.199">        {</a>
<span class="sourceLineNo">200</span><a id="line.200">            StringBuilder sb = new StringBuilder(), tmp = new StringBuilder();</a>
<span class="sourceLineNo">201</span><a id="line.201">            if(capitalize)</a>
<span class="sourceLineNo">202</span><a id="line.202">                sb.append('A');</a>
<span class="sourceLineNo">203</span><a id="line.203">            else</a>
<span class="sourceLineNo">204</span><a id="line.204">                sb.append('a');</a>
<span class="sourceLineNo">205</span><a id="line.205">            int i = 0;</a>
<span class="sourceLineNo">206</span><a id="line.206">            OrderedSet&lt;String&gt; allAdjectives = new OrderedSet&lt;&gt;(wholeAdjectives);</a>
<span class="sourceLineNo">207</span><a id="line.207">            if(unknown != null)</a>
<span class="sourceLineNo">208</span><a id="line.208">                allAdjectives.addAll(unsaidAdjectives);</a>
<span class="sourceLineNo">209</span><a id="line.209">            allAdjectives.addAll(powerAdjectives);</a>
<span class="sourceLineNo">210</span><a id="line.210">            for(String adj : allAdjectives)</a>
<span class="sourceLineNo">211</span><a id="line.211">            {</a>
<span class="sourceLineNo">212</span><a id="line.212">                tmp.append(adj);</a>
<span class="sourceLineNo">213</span><a id="line.213">                if(++i &lt; allAdjectives.size())</a>
<span class="sourceLineNo">214</span><a id="line.214">                    tmp.append(',');</a>
<span class="sourceLineNo">215</span><a id="line.215">                tmp.append(' ');</a>
<span class="sourceLineNo">216</span><a id="line.216">            }</a>
<span class="sourceLineNo">217</span><a id="line.217">            tmp.append(mainForm);</a>
<span class="sourceLineNo">218</span><a id="line.218">            String ts = tmp.toString();</a>
<span class="sourceLineNo">219</span><a id="line.219">            if(ts.matches("^[aeiouAEIOU].*"))</a>
<span class="sourceLineNo">220</span><a id="line.220">                sb.append('n');</a>
<span class="sourceLineNo">221</span><a id="line.221">            sb.append(' ').append(ts);</a>
<span class="sourceLineNo">222</span><a id="line.222">            if(!(powerPhrases.isEmpty() &amp;&amp; parts.size() == 1))</a>
<span class="sourceLineNo">223</span><a id="line.223">                sb.append(' ');</a>
<span class="sourceLineNo">224</span><a id="line.224">            if(parts.size() &gt; 1)</a>
<span class="sourceLineNo">225</span><a id="line.225">            {</a>
<span class="sourceLineNo">226</span><a id="line.226">                sb.append("with the");</a>
<span class="sourceLineNo">227</span><a id="line.227">                i = 1;</a>
<span class="sourceLineNo">228</span><a id="line.228">                for(Map.Entry&lt;String, List&lt;String&gt;&gt; ent : parts.entrySet())</a>
<span class="sourceLineNo">229</span><a id="line.229">                {</a>
<span class="sourceLineNo">230</span><a id="line.230">                    if(name != null &amp;&amp; name.equals(ent.getKey()))</a>
<span class="sourceLineNo">231</span><a id="line.231">                        continue;</a>
<span class="sourceLineNo">232</span><a id="line.232">                    if(ent.getValue().isEmpty())</a>
<span class="sourceLineNo">233</span><a id="line.233">                        sb.append(" feel");</a>
<span class="sourceLineNo">234</span><a id="line.234">                    else</a>
<span class="sourceLineNo">235</span><a id="line.235">                    {</a>
<span class="sourceLineNo">236</span><a id="line.236">                        int j = 1;</a>
<span class="sourceLineNo">237</span><a id="line.237">                        for(String p : ent.getValue())</a>
<span class="sourceLineNo">238</span><a id="line.238">                        {</a>
<span class="sourceLineNo">239</span><a id="line.239">                            sb.append(' ').append(p);</a>
<span class="sourceLineNo">240</span><a id="line.240">                            if(j++ &lt; ent.getValue().size() &amp;&amp; ent.getValue().size() &gt; 2)</a>
<span class="sourceLineNo">241</span><a id="line.241">                                sb.append(',');</a>
<span class="sourceLineNo">242</span><a id="line.242">                            if(j == ent.getValue().size() &amp;&amp; ent.getValue().size() &gt;= 2)</a>
<span class="sourceLineNo">243</span><a id="line.243">                                sb.append(" and");</a>
<span class="sourceLineNo">244</span><a id="line.244">                        }</a>
<span class="sourceLineNo">245</span><a id="line.245">                    }</a>
<span class="sourceLineNo">246</span><a id="line.246">                    sb.append(" of a ").append(ent.getKey());</a>
<span class="sourceLineNo">247</span><a id="line.247"></a>
<span class="sourceLineNo">248</span><a id="line.248"></a>
<span class="sourceLineNo">249</span><a id="line.249">                    if(i++ &lt; parts.size() &amp;&amp; parts.size() &gt; 3)</a>
<span class="sourceLineNo">250</span><a id="line.250">                        sb.append(',');</a>
<span class="sourceLineNo">251</span><a id="line.251">                    if(i == parts.size() &amp;&amp; parts.size() &gt;= 3)</a>
<span class="sourceLineNo">252</span><a id="line.252">                        sb.append(" and");</a>
<span class="sourceLineNo">253</span><a id="line.253">                    sb.append(' ');</a>
<span class="sourceLineNo">254</span><a id="line.254">                }</a>
<span class="sourceLineNo">255</span><a id="line.255">            }</a>
<span class="sourceLineNo">256</span><a id="line.256"></a>
<span class="sourceLineNo">257</span><a id="line.257">            if(!powerPhrases.isEmpty())</a>
<span class="sourceLineNo">258</span><a id="line.258">                sb.append("that");</a>
<span class="sourceLineNo">259</span><a id="line.259">            i = 1;</a>
<span class="sourceLineNo">260</span><a id="line.260">            for(String phr : powerPhrases)</a>
<span class="sourceLineNo">261</span><a id="line.261">            {</a>
<span class="sourceLineNo">262</span><a id="line.262">                sb.append(' ').append(phr);</a>
<span class="sourceLineNo">263</span><a id="line.263">                if(i++ &lt; powerPhrases.size() &amp;&amp; powerPhrases.size() &gt; 2)</a>
<span class="sourceLineNo">264</span><a id="line.264">                    sb.append(',');</a>
<span class="sourceLineNo">265</span><a id="line.265">                if(i == powerPhrases.size() &amp;&amp; powerPhrases.size() &gt;= 2)</a>
<span class="sourceLineNo">266</span><a id="line.266">                    sb.append(" and");</a>
<span class="sourceLineNo">267</span><a id="line.267">            }</a>
<span class="sourceLineNo">268</span><a id="line.268">            return sb.toString();</a>
<span class="sourceLineNo">269</span><a id="line.269">        }</a>
<span class="sourceLineNo">270</span><a id="line.270"></a>
<span class="sourceLineNo">271</span><a id="line.271">        /**</a>
<span class="sourceLineNo">272</span><a id="line.272">         * Get a string description of this monster's appearance.</a>
<span class="sourceLineNo">273</span><a id="line.273">         * @param capitalize true if the description should start with a capital letter.</a>
<span class="sourceLineNo">274</span><a id="line.274">         * @return a String description including only the monster's appearance</a>
<span class="sourceLineNo">275</span><a id="line.275">         */</a>
<span class="sourceLineNo">276</span><a id="line.276">        public String presentVisible(boolean capitalize)</a>
<span class="sourceLineNo">277</span><a id="line.277">        {</a>
<span class="sourceLineNo">278</span><a id="line.278">            StringBuilder sb = new StringBuilder(), tmp = new StringBuilder();</a>
<span class="sourceLineNo">279</span><a id="line.279">            if(capitalize)</a>
<span class="sourceLineNo">280</span><a id="line.280">                sb.append('A');</a>
<span class="sourceLineNo">281</span><a id="line.281">            else</a>
<span class="sourceLineNo">282</span><a id="line.282">                sb.append('a');</a>
<span class="sourceLineNo">283</span><a id="line.283">            int i = 0;</a>
<span class="sourceLineNo">284</span><a id="line.284"></a>
<span class="sourceLineNo">285</span><a id="line.285">            OrderedSet&lt;String&gt; allAdjectives = new OrderedSet&lt;&gt;(wholeAdjectives);</a>
<span class="sourceLineNo">286</span><a id="line.286">            if(unknown != null)</a>
<span class="sourceLineNo">287</span><a id="line.287">                allAdjectives.addAll(unsaidAdjectives);</a>
<span class="sourceLineNo">288</span><a id="line.288">            for(String adj : allAdjectives)</a>
<span class="sourceLineNo">289</span><a id="line.289">            {</a>
<span class="sourceLineNo">290</span><a id="line.290">                tmp.append(adj);</a>
<span class="sourceLineNo">291</span><a id="line.291">                if(++i &lt; allAdjectives.size())</a>
<span class="sourceLineNo">292</span><a id="line.292">                    tmp.append(',');</a>
<span class="sourceLineNo">293</span><a id="line.293">                tmp.append(' ');</a>
<span class="sourceLineNo">294</span><a id="line.294">            }</a>
<span class="sourceLineNo">295</span><a id="line.295">            tmp.append(mainForm);</a>
<span class="sourceLineNo">296</span><a id="line.296">            String ts = tmp.toString();</a>
<span class="sourceLineNo">297</span><a id="line.297">            if(ts.matches("^[aeiouAEIOU].*"))</a>
<span class="sourceLineNo">298</span><a id="line.298">                sb.append('n');</a>
<span class="sourceLineNo">299</span><a id="line.299">            sb.append(' ').append(ts);</a>
<span class="sourceLineNo">300</span><a id="line.300">            if(parts.size() &gt; 1)</a>
<span class="sourceLineNo">301</span><a id="line.301">            {</a>
<span class="sourceLineNo">302</span><a id="line.302">                sb.append(" with the");</a>
<span class="sourceLineNo">303</span><a id="line.303">                i = 1;</a>
<span class="sourceLineNo">304</span><a id="line.304">                for(Map.Entry&lt;String, List&lt;String&gt;&gt; ent : parts.entrySet())</a>
<span class="sourceLineNo">305</span><a id="line.305">                {</a>
<span class="sourceLineNo">306</span><a id="line.306">                    if(name != null &amp;&amp; name.equals(ent.getKey()))</a>
<span class="sourceLineNo">307</span><a id="line.307">                        continue;</a>
<span class="sourceLineNo">308</span><a id="line.308">                    if(ent.getValue().isEmpty())</a>
<span class="sourceLineNo">309</span><a id="line.309">                        sb.append(" feel");</a>
<span class="sourceLineNo">310</span><a id="line.310">                    else</a>
<span class="sourceLineNo">311</span><a id="line.311">                    {</a>
<span class="sourceLineNo">312</span><a id="line.312">                        int j = 1;</a>
<span class="sourceLineNo">313</span><a id="line.313">                        for(String p : ent.getValue())</a>
<span class="sourceLineNo">314</span><a id="line.314">                        {</a>
<span class="sourceLineNo">315</span><a id="line.315">                            sb.append(' ').append(p);</a>
<span class="sourceLineNo">316</span><a id="line.316">                            if(j++ &lt; ent.getValue().size() &amp;&amp; ent.getValue().size() &gt; 2)</a>
<span class="sourceLineNo">317</span><a id="line.317">                                sb.append(',');</a>
<span class="sourceLineNo">318</span><a id="line.318">                            if(j == ent.getValue().size() &amp;&amp; ent.getValue().size() &gt;= 2)</a>
<span class="sourceLineNo">319</span><a id="line.319">                                sb.append(" and");</a>
<span class="sourceLineNo">320</span><a id="line.320">                        }</a>
<span class="sourceLineNo">321</span><a id="line.321">                    }</a>
<span class="sourceLineNo">322</span><a id="line.322">                    sb.append(" of a ").append(ent.getKey());</a>
<span class="sourceLineNo">323</span><a id="line.323"></a>
<span class="sourceLineNo">324</span><a id="line.324"></a>
<span class="sourceLineNo">325</span><a id="line.325">                    if(i++ &lt; parts.size() &amp;&amp; parts.size() &gt; 3)</a>
<span class="sourceLineNo">326</span><a id="line.326">                        sb.append(',');</a>
<span class="sourceLineNo">327</span><a id="line.327">                    if(i == parts.size() &amp;&amp; parts.size() &gt;= 3)</a>
<span class="sourceLineNo">328</span><a id="line.328">                        sb.append(" and");</a>
<span class="sourceLineNo">329</span><a id="line.329">                    sb.append(' ');</a>
<span class="sourceLineNo">330</span><a id="line.330">                }</a>
<span class="sourceLineNo">331</span><a id="line.331">            }</a>
<span class="sourceLineNo">332</span><a id="line.332"></a>
<span class="sourceLineNo">333</span><a id="line.333">            return sb.toString();</a>
<span class="sourceLineNo">334</span><a id="line.334">        }</a>
<span class="sourceLineNo">335</span><a id="line.335"></a>
<span class="sourceLineNo">336</span><a id="line.336">        @Override</a>
<span class="sourceLineNo">337</span><a id="line.337">        public String toString() {</a>
<span class="sourceLineNo">338</span><a id="line.338">            return name;</a>
<span class="sourceLineNo">339</span><a id="line.339">        }</a>
<span class="sourceLineNo">340</span><a id="line.340"></a>
<span class="sourceLineNo">341</span><a id="line.341">        /**</a>
<span class="sourceLineNo">342</span><a id="line.342">         * Fuse two Chimera objects by some fraction of influence, using the given RNG and possibly renaming the</a>
<span class="sourceLineNo">343</span><a id="line.343">         * creature. Does not modify the existing Chimera objects.</a>
<span class="sourceLineNo">344</span><a id="line.344">         * @param rng the RNG to determine random factors</a>
<span class="sourceLineNo">345</span><a id="line.345">         * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">346</span><a id="line.346">         * @param other the Chimera to mix with this one</a>
<span class="sourceLineNo">347</span><a id="line.347">         * @param otherInfluence the fraction between 0.0 and 1.0 of descriptors from other to use</a>
<span class="sourceLineNo">348</span><a id="line.348">         * @return a new Chimera mixing features from both inputs</a>
<span class="sourceLineNo">349</span><a id="line.349">         */</a>
<span class="sourceLineNo">350</span><a id="line.350">        public Chimera mix(RNG rng, String newName, Chimera other, double otherInfluence)</a>
<span class="sourceLineNo">351</span><a id="line.351">        {</a>
<span class="sourceLineNo">352</span><a id="line.352">            Chimera next = new Chimera(newName, this);</a>
<span class="sourceLineNo">353</span><a id="line.353">            List&lt;String&gt; otherParts = other.parts.get(other.name),</a>
<span class="sourceLineNo">354</span><a id="line.354">                    p2 = rng.randomPortion(otherParts, (int)Math.round(otherParts.size() * otherInfluence * 0.5));</a>
<span class="sourceLineNo">355</span><a id="line.355">            next.parts.put(other.name, p2);</a>
<span class="sourceLineNo">356</span><a id="line.356">            String[] unsaid = other.unsaidAdjectives.toArray(new String[other.unsaidAdjectives.size()]),</a>
<span class="sourceLineNo">357</span><a id="line.357">                    talentAdj = other.powerAdjectives.toArray(new String[other.powerAdjectives.size()]),</a>
<span class="sourceLineNo">358</span><a id="line.358">                    talentPhr = other.powerPhrases.toArray(new String[other.powerPhrases.size()]);</a>
<span class="sourceLineNo">359</span><a id="line.359">            unsaid = portion(rng, unsaid, (int)Math.round(unsaid.length * otherInfluence));</a>
<span class="sourceLineNo">360</span><a id="line.360">            talentAdj = portion(rng, talentAdj, (int)Math.round(talentAdj.length * otherInfluence));</a>
<span class="sourceLineNo">361</span><a id="line.361">            talentPhr = portion(rng, talentPhr, (int)Math.round(talentPhr.length * otherInfluence));</a>
<span class="sourceLineNo">362</span><a id="line.362">            Collections.addAll(next.wholeAdjectives, unsaid);</a>
<span class="sourceLineNo">363</span><a id="line.363">            Collections.addAll(next.powerAdjectives, talentAdj);</a>
<span class="sourceLineNo">364</span><a id="line.364">            Collections.addAll(next.powerPhrases, talentPhr);</a>
<span class="sourceLineNo">365</span><a id="line.365"></a>
<span class="sourceLineNo">366</span><a id="line.366">            return next;</a>
<span class="sourceLineNo">367</span><a id="line.367">        }</a>
<span class="sourceLineNo">368</span><a id="line.368"></a>
<span class="sourceLineNo">369</span><a id="line.369">        /**</a>
<span class="sourceLineNo">370</span><a id="line.370">         * Fuse two Chimera objects by some fraction of influence, using the default RNG and possibly renaming the</a>
<span class="sourceLineNo">371</span><a id="line.371">         * creature. Does not modify the existing Chimera objects.</a>
<span class="sourceLineNo">372</span><a id="line.372">         * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">373</span><a id="line.373">         * @param other the Chimera to mix with this one</a>
<span class="sourceLineNo">374</span><a id="line.374">         * @param otherInfluence the fraction between 0.0 and 1.0 of descriptors from other to use</a>
<span class="sourceLineNo">375</span><a id="line.375">         * @return a new Chimera mixing features from both inputs</a>
<span class="sourceLineNo">376</span><a id="line.376">         */</a>
<span class="sourceLineNo">377</span><a id="line.377">        public Chimera mix(String newName, Chimera other, double otherInfluence)</a>
<span class="sourceLineNo">378</span><a id="line.378">        {</a>
<span class="sourceLineNo">379</span><a id="line.379">            return mix(srng, newName, other, otherInfluence);</a>
<span class="sourceLineNo">380</span><a id="line.380">        }</a>
<span class="sourceLineNo">381</span><a id="line.381">    }</a>
<span class="sourceLineNo">382</span><a id="line.382">    public static final Chimera SNAKE = new Chimera("snake", null, "head", "tail", "fangs", "eyes", ";",</a>
<span class="sourceLineNo">383</span><a id="line.383">            "reptilian", "scaly", "lean", "curvaceous", ";",</a>
<span class="sourceLineNo">384</span><a id="line.384">            ";",</a>
<span class="sourceLineNo">385</span><a id="line.385">            "toxic"),</a>
<span class="sourceLineNo">386</span><a id="line.386">            LION = new Chimera("lion", null, "head", "tail", "legs", "claws", "fangs", "eyes", ";",</a>
<span class="sourceLineNo">387</span><a id="line.387">                    "hairy", "muscular", ";",</a>
<span class="sourceLineNo">388</span><a id="line.388">                    ";",</a>
<span class="sourceLineNo">389</span><a id="line.389">                    "furious"),</a>
<span class="sourceLineNo">390</span><a id="line.390">            HORSE = new Chimera("horse", null, "head", "tail", "legs", "hooves", "eyes", ";",</a>
<span class="sourceLineNo">391</span><a id="line.391">                    "fuzzy", "muscular", "lean", ";",</a>
<span class="sourceLineNo">392</span><a id="line.392">                    ";",</a>
<span class="sourceLineNo">393</span><a id="line.393">                    "nimble"),</a>
<span class="sourceLineNo">394</span><a id="line.394">            HAWK = new Chimera("hawk", null, "head", "tail", "legs", "claws", "beak", "eyes", "wings", ";",</a>
<span class="sourceLineNo">395</span><a id="line.395">                    "feathered", "avian", "lean", ";",</a>
<span class="sourceLineNo">396</span><a id="line.396">                    ";",</a>
<span class="sourceLineNo">397</span><a id="line.397">                    "screeching", "nimble"),</a>
<span class="sourceLineNo">398</span><a id="line.398">            SHOGGOTH = new Chimera("shoggoth", "non-Euclidean ooze", "eyes", "fangs", "pseudopods", ";",</a>
<span class="sourceLineNo">399</span><a id="line.399">                    "pulpy", "horrid", "tentacled", ";",</a>
<span class="sourceLineNo">400</span><a id="line.400">                    ";",</a>
<span class="sourceLineNo">401</span><a id="line.401">                    "terrifying", "regenerating", "semi-corporeal", ";",</a>
<span class="sourceLineNo">402</span><a id="line.402">                    "shudders between impossible dimensions");</a>
<span class="sourceLineNo">403</span><a id="line.403"></a>
<span class="sourceLineNo">404</span><a id="line.404">    /**</a>
<span class="sourceLineNo">405</span><a id="line.405">     * Constructs a MonsterGen with a random seed for the default RNG.</a>
<span class="sourceLineNo">406</span><a id="line.406">     */</a>
<span class="sourceLineNo">407</span><a id="line.407">    public MonsterGen()</a>
<span class="sourceLineNo">408</span><a id="line.408">    {</a>
<span class="sourceLineNo">409</span><a id="line.409"></a>
<span class="sourceLineNo">410</span><a id="line.410">    }</a>
<span class="sourceLineNo">411</span><a id="line.411">    /**</a>
<span class="sourceLineNo">412</span><a id="line.412">     * Constructs a MonsterGen with the given seed for the default RNG.</a>
<span class="sourceLineNo">413</span><a id="line.413">     */</a>
<span class="sourceLineNo">414</span><a id="line.414">    public MonsterGen(long seed)</a>
<span class="sourceLineNo">415</span><a id="line.415">    {</a>
<span class="sourceLineNo">416</span><a id="line.416">        srng.setState(seed);</a>
<span class="sourceLineNo">417</span><a id="line.417">    }</a>
<span class="sourceLineNo">418</span><a id="line.418">    /**</a>
<span class="sourceLineNo">419</span><a id="line.419">     * Constructs a MonsterGen with the given seed (hashing seed with CrossHash) for the default RNG.</a>
<span class="sourceLineNo">420</span><a id="line.420">     */</a>
<span class="sourceLineNo">421</span><a id="line.421">    public MonsterGen(String seed)</a>
<span class="sourceLineNo">422</span><a id="line.422">    {</a>
<span class="sourceLineNo">423</span><a id="line.423">        srng.setState(CrossHash.hash(seed));</a>
<span class="sourceLineNo">424</span><a id="line.424">    }</a>
<span class="sourceLineNo">425</span><a id="line.425"></a>
<span class="sourceLineNo">426</span><a id="line.426">    /**</a>
<span class="sourceLineNo">427</span><a id="line.427">     * Randomly add appearance descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</a>
<span class="sourceLineNo">428</span><a id="line.428">     * different name, and adds the specified count of adjectives (if any are added that the creature already has, they</a>
<span class="sourceLineNo">429</span><a id="line.429">     * are ignored, and this includes unsaid adjectives if the creature is known).</a>
<span class="sourceLineNo">430</span><a id="line.430">     * @param rng the RNG to determine random factors</a>
<span class="sourceLineNo">431</span><a id="line.431">     * @param creature the Chimera to add descriptors to</a>
<span class="sourceLineNo">432</span><a id="line.432">     * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">433</span><a id="line.433">     * @param adjectiveCount the number of adjectives to add; may add less if some overlap</a>
<span class="sourceLineNo">434</span><a id="line.434">     * @return a new Chimera with additional appearance descriptors</a>
<span class="sourceLineNo">435</span><a id="line.435">     */</a>
<span class="sourceLineNo">436</span><a id="line.436">    public Chimera randomizeAppearance(RNG rng, Chimera creature, String newName, int adjectiveCount)</a>
<span class="sourceLineNo">437</span><a id="line.437">    {</a>
<span class="sourceLineNo">438</span><a id="line.438">        Chimera next = new Chimera(newName, creature);</a>
<span class="sourceLineNo">439</span><a id="line.439">        Collections.addAll(next.wholeAdjectives, portion(rng, adjectives, adjectiveCount));</a>
<span class="sourceLineNo">440</span><a id="line.440">        next.wholeAdjectives.removeAll(next.unsaidAdjectives);</a>
<span class="sourceLineNo">441</span><a id="line.441">        return next;</a>
<span class="sourceLineNo">442</span><a id="line.442">    }</a>
<span class="sourceLineNo">443</span><a id="line.443"></a>
<span class="sourceLineNo">444</span><a id="line.444">    /**</a>
<span class="sourceLineNo">445</span><a id="line.445">     * Randomly add appearance descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</a>
<span class="sourceLineNo">446</span><a id="line.446">     * different name, and adds the specified count of adjectives (if any are added that the creature already has, they</a>
<span class="sourceLineNo">447</span><a id="line.447">     * are ignored, and this includes unsaid adjectives if the creature is known).</a>
<span class="sourceLineNo">448</span><a id="line.448">     * @param creature the Chimera to add descriptors to</a>
<span class="sourceLineNo">449</span><a id="line.449">     * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">450</span><a id="line.450">     * @param adjectiveCount the number of adjectives to add; may add less if some overlap</a>
<span class="sourceLineNo">451</span><a id="line.451">     * @return a new Chimera with additional appearance descriptors</a>
<span class="sourceLineNo">452</span><a id="line.452">     */</a>
<span class="sourceLineNo">453</span><a id="line.453">    public Chimera randomizeAppearance(Chimera creature, String newName, int adjectiveCount)</a>
<span class="sourceLineNo">454</span><a id="line.454">    {</a>
<span class="sourceLineNo">455</span><a id="line.455">        return randomizeAppearance(srng, creature, newName, adjectiveCount);</a>
<span class="sourceLineNo">456</span><a id="line.456">    }</a>
<span class="sourceLineNo">457</span><a id="line.457"></a>
<span class="sourceLineNo">458</span><a id="line.458">    /**</a>
<span class="sourceLineNo">459</span><a id="line.459">     * Randomly add power descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</a>
<span class="sourceLineNo">460</span><a id="line.460">     * different name, and adds the specified total count of power adjectives and phrases (if any are added that the</a>
<span class="sourceLineNo">461</span><a id="line.461">     * creature already has, they are ignored).</a>
<span class="sourceLineNo">462</span><a id="line.462">     * @param rng the RNG to determine random factors</a>
<span class="sourceLineNo">463</span><a id="line.463">     * @param creature the Chimera to add descriptors to</a>
<span class="sourceLineNo">464</span><a id="line.464">     * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">465</span><a id="line.465">     * @param powerCount the number of adjectives to add; may add less if some overlap</a>
<span class="sourceLineNo">466</span><a id="line.466">     * @return a new Chimera with additional power descriptors</a>
<span class="sourceLineNo">467</span><a id="line.467">     */</a>
<span class="sourceLineNo">468</span><a id="line.468">    public Chimera randomizePowers(RNG rng, Chimera creature, String newName, int powerCount)</a>
<span class="sourceLineNo">469</span><a id="line.469">    {</a>
<span class="sourceLineNo">470</span><a id="line.470">        Chimera next = new Chimera(newName, creature);</a>
<span class="sourceLineNo">471</span><a id="line.471">        int adjs = rng.nextInt(powerCount + 1), phrs = powerCount - adjs;</a>
<span class="sourceLineNo">472</span><a id="line.472">        Collections.addAll(next.powerAdjectives, portion(rng, powerAdjectives, adjs));</a>
<span class="sourceLineNo">473</span><a id="line.473">        Collections.addAll(next.powerPhrases, portion(rng, powerPhrases, phrs));</a>
<span class="sourceLineNo">474</span><a id="line.474">        return next;</a>
<span class="sourceLineNo">475</span><a id="line.475">    }</a>
<span class="sourceLineNo">476</span><a id="line.476"></a>
<span class="sourceLineNo">477</span><a id="line.477">    /**</a>
<span class="sourceLineNo">478</span><a id="line.478">     * Randomly add power descriptors to a copy of the Chimera creature. Produces a new Chimera, potentially with a</a>
<span class="sourceLineNo">479</span><a id="line.479">     * different name, and adds the specified total count of power adjectives and phrases (if any are added that the</a>
<span class="sourceLineNo">480</span><a id="line.480">     * creature already has, they are ignored).</a>
<span class="sourceLineNo">481</span><a id="line.481">     * @param creature the Chimera to add descriptors to</a>
<span class="sourceLineNo">482</span><a id="line.482">     * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">483</span><a id="line.483">     * @param powerCount the number of adjectives to add; may add less if some overlap</a>
<span class="sourceLineNo">484</span><a id="line.484">     * @return a new Chimera with additional power descriptors</a>
<span class="sourceLineNo">485</span><a id="line.485">     */</a>
<span class="sourceLineNo">486</span><a id="line.486">    public Chimera randomizePowers(Chimera creature, String newName, int powerCount)</a>
<span class="sourceLineNo">487</span><a id="line.487">    {</a>
<span class="sourceLineNo">488</span><a id="line.488">        return randomizePowers(srng, creature, newName, powerCount);</a>
<span class="sourceLineNo">489</span><a id="line.489">    }</a>
<span class="sourceLineNo">490</span><a id="line.490"></a>
<span class="sourceLineNo">491</span><a id="line.491">    /**</a>
<span class="sourceLineNo">492</span><a id="line.492">     * Randomly add appearance and power descriptors to a new Chimera creature with random body part adjectives.</a>
<span class="sourceLineNo">493</span><a id="line.493">     * Produces a new Chimera with the specified name, and adds the specified total count (detail) of appearance</a>
<span class="sourceLineNo">494</span><a id="line.494">     * adjectives, power adjectives and phrases, and the same count (detail) of body parts.</a>
<span class="sourceLineNo">495</span><a id="line.495">     * @param rng the RNG to determine random factors</a>
<span class="sourceLineNo">496</span><a id="line.496">     * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">497</span><a id="line.497">     * @param detail the number of adjectives and phrases to add, also the number of body parts</a>
<span class="sourceLineNo">498</span><a id="line.498">     * @return a new Chimera with random traits</a>
<span class="sourceLineNo">499</span><a id="line.499">     */</a>
<span class="sourceLineNo">500</span><a id="line.500">    public Chimera randomize(RNG rng, String newName, int detail)</a>
<span class="sourceLineNo">501</span><a id="line.501">    {</a>
<span class="sourceLineNo">502</span><a id="line.502">        ArrayList&lt;String&gt; ps = new ArrayList&lt;String&gt;();</a>
<span class="sourceLineNo">503</span><a id="line.503">        Collections.addAll(ps, portion(rng, components, detail));</a>
<span class="sourceLineNo">504</span><a id="line.504">        Chimera next = new Chimera(newName, "thing", ps, new ArrayList&lt;String&gt;(),</a>
<span class="sourceLineNo">505</span><a id="line.505">                new ArrayList&lt;String&gt;(), new ArrayList&lt;String&gt;(), new ArrayList&lt;String&gt;());</a>
<span class="sourceLineNo">506</span><a id="line.506">        if(detail &gt; 0) {</a>
<span class="sourceLineNo">507</span><a id="line.507">            int powerCount = rng.nextInt(detail), bodyCount = detail - powerCount;</a>
<span class="sourceLineNo">508</span><a id="line.508">            int adjs = rng.nextInt(powerCount + 1), phrs = powerCount - adjs;</a>
<span class="sourceLineNo">509</span><a id="line.509"></a>
<span class="sourceLineNo">510</span><a id="line.510">            Collections.addAll(next.unsaidAdjectives, portion(rng, adjectives, bodyCount));</a>
<span class="sourceLineNo">511</span><a id="line.511">            Collections.addAll(next.powerAdjectives, portion(rng, powerAdjectives, adjs));</a>
<span class="sourceLineNo">512</span><a id="line.512">            Collections.addAll(next.powerPhrases, portion(rng, powerPhrases, phrs));</a>
<span class="sourceLineNo">513</span><a id="line.513">        }</a>
<span class="sourceLineNo">514</span><a id="line.514">        return next;</a>
<span class="sourceLineNo">515</span><a id="line.515">    }</a>
<span class="sourceLineNo">516</span><a id="line.516"></a>
<span class="sourceLineNo">517</span><a id="line.517">    /**</a>
<span class="sourceLineNo">518</span><a id="line.518">     * Randomly add appearance and power descriptors to a new Chimera creature with random body part adjectives.</a>
<span class="sourceLineNo">519</span><a id="line.519">     * Produces a new Chimera with the specified name, and adds the specified total count (detail) of appearance</a>
<span class="sourceLineNo">520</span><a id="line.520">     * adjectives, power adjectives and phrases, and the same count (detail) of body parts.</a>
<span class="sourceLineNo">521</span><a id="line.521">     * @param newName the name to call the produced Chimera</a>
<span class="sourceLineNo">522</span><a id="line.522">     * @param detail the number of adjectives and phrases to add, also the number of body parts</a>
<span class="sourceLineNo">523</span><a id="line.523">     * @return a new Chimera with random traits</a>
<span class="sourceLineNo">524</span><a id="line.524">     */</a>
<span class="sourceLineNo">525</span><a id="line.525">    public Chimera randomize(String newName, int detail)</a>
<span class="sourceLineNo">526</span><a id="line.526">    {</a>
<span class="sourceLineNo">527</span><a id="line.527">        return randomize(srng, newName, detail);</a>
<span class="sourceLineNo">528</span><a id="line.528">    }</a>
<span class="sourceLineNo">529</span><a id="line.529"></a>
<span class="sourceLineNo">530</span><a id="line.530">    /**</a>
<span class="sourceLineNo">531</span><a id="line.531">     * Randomly add appearance and power descriptors to a new Chimera creature with random body part adjectives.</a>
<span class="sourceLineNo">532</span><a id="line.532">     * Produces a new Chimera with a random name using FakeLanguageGen, and adds a total of 5 appearance adjectives,</a>
<span class="sourceLineNo">533</span><a id="line.533">     * power adjectives and phrases, and 5 body parts.</a>
<span class="sourceLineNo">534</span><a id="line.534">     * @return a new Chimera with random traits</a>
<span class="sourceLineNo">535</span><a id="line.535">     */</a>
<span class="sourceLineNo">536</span><a id="line.536">    public Chimera randomize()</a>
<span class="sourceLineNo">537</span><a id="line.537">    {</a>
<span class="sourceLineNo">538</span><a id="line.538">        return randomize(srng, randomName(srng), 5);</a>
<span class="sourceLineNo">539</span><a id="line.539">    }</a>
<span class="sourceLineNo">540</span><a id="line.540"></a>
<span class="sourceLineNo">541</span><a id="line.541">    /**</a>
<span class="sourceLineNo">542</span><a id="line.542">     * Gets a random name as a String using FakeLanguageGen.</a>
<span class="sourceLineNo">543</span><a id="line.543">     * @param rng the RNG to use for random factors</a>
<span class="sourceLineNo">544</span><a id="line.544">     * @return a String meant to be used as a creature name</a>
<span class="sourceLineNo">545</span><a id="line.545">     */</a>
<span class="sourceLineNo">546</span><a id="line.546">    public String randomName(RNG rng)</a>
<span class="sourceLineNo">547</span><a id="line.547">    {</a>
<span class="sourceLineNo">548</span><a id="line.548">        return FakeLanguageGen.FANTASY_NAME.word(rng, false, rng.between(2, 4));</a>
<span class="sourceLineNo">549</span><a id="line.549">    }</a>
<span class="sourceLineNo">550</span><a id="line.550"></a>
<span class="sourceLineNo">551</span><a id="line.551">    /**</a>
<span class="sourceLineNo">552</span><a id="line.552">     * Gets a random name as a String using FakeLanguageGen.</a>
<span class="sourceLineNo">553</span><a id="line.553">     * @return a String meant to be used as a creature name</a>
<span class="sourceLineNo">554</span><a id="line.554">     */</a>
<span class="sourceLineNo">555</span><a id="line.555">    public String randomName()</a>
<span class="sourceLineNo">556</span><a id="line.556">    {</a>
<span class="sourceLineNo">557</span><a id="line.557">        return randomName(srng);</a>
<span class="sourceLineNo">558</span><a id="line.558">    }</a>
<span class="sourceLineNo">559</span><a id="line.559"></a>
<span class="sourceLineNo">560</span><a id="line.560">    private static String[] portion(RNG rng, String[] source, int amount)</a>
<span class="sourceLineNo">561</span><a id="line.561">    {</a>
<span class="sourceLineNo">562</span><a id="line.562">        return rng.randomPortion(source, new String[Math.min(source.length, amount)]);</a>
<span class="sourceLineNo">563</span><a id="line.563">    }</a>
<span class="sourceLineNo">564</span><a id="line.564"></a>
<span class="sourceLineNo">565</span><a id="line.565">}</a>




























































</pre>
</div>
</main>
</body>
</html>
